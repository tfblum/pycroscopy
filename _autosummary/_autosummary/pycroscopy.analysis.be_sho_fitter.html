

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pycroscopy.analysis.be_sho_fitter &mdash; pycroscopy 0.60.4 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery.css" type="text/css" />
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="pycroscopy.analysis.fit_methods" href="pycroscopy.analysis.fit_methods.html" />
    <link rel="prev" title="pycroscopy.analysis.be_loop_fitter" href="pycroscopy.analysis.be_loop_fitter.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> pycroscopy
          

          
            
            <img src="../../_static/logo_v01.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.60.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../about.html">Pycroscopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../papers_conferences.html">Papers / Conferences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../external_guides.html">Tutorials on Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/index.html">Examples &amp; Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../translators.html">Data Translators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribution_guidelines.html">Guidelines for Contribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contact.html">Contact us</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../whats_new.html">What’s New</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../credits.html#acknowledgements">Acknowledgements</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../api.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../api.html#package-structure">Package Structure</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../api.html#submodules">Submodules</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../pycroscopy.analysis.html">pycroscopy.analysis</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../pycroscopy.analysis.html#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../pycroscopy.io.html">pycroscopy.io</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pycroscopy.processing.html">pycroscopy.processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pycroscopy.viz.html">pycroscopy.viz</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">pycroscopy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../api.html">API Reference</a> &raquo;</li>
        
          <li><a href="../pycroscopy.analysis.html">pycroscopy.analysis</a> &raquo;</li>
        
      <li>pycroscopy.analysis.be_sho_fitter</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/_autosummary/_autosummary/pycroscopy.analysis.be_sho_fitter.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-pycroscopy.analysis.be_sho_fitter">
<span id="pycroscopy-analysis-be-sho-fitter"></span><h1>pycroscopy.analysis.be_sho_fitter<a class="headerlink" href="#module-pycroscopy.analysis.be_sho_fitter" title="Permalink to this headline">¶</a></h1>
<p><a class="reference internal" href="#pycroscopy.analysis.be_sho_fitter.BESHOfitter" title="pycroscopy.analysis.be_sho_fitter.BESHOfitter"><code class="xref py py-class docutils literal notranslate"><span class="pre">BESHOfitter</span></code></a> that fits Band Excitation Scanning Probe Microscopy data to a
Simple Harmonic Oscillator model</p>
<p>Created on 7/17/16 10:08 AM
&#64;author: Suhas Somnath, Chris R. Smith, Numan Laanait</p>
<p class="rubric">Functions</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycroscopy.analysis.be_sho_fitter.is_reshapable" title="pycroscopy.analysis.be_sho_fitter.is_reshapable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_reshapable</span></code></a>(h5_main[, step_start_inds])</p></td>
<td><p>A BE dataset is said to be reshape-able if the number of bins per steps is constant.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycroscopy.analysis.be_sho_fitter.reshape_to_n_steps" title="pycroscopy.analysis.be_sho_fitter.reshape_to_n_steps"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reshape_to_n_steps</span></code></a>(raw_mat, num_steps)</p></td>
<td><p>Reshapes provided data from (positions * step, bin) to (positions, step * bin).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycroscopy.analysis.be_sho_fitter.reshape_to_one_step" title="pycroscopy.analysis.be_sho_fitter.reshape_to_one_step"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reshape_to_one_step</span></code></a>(raw_mat, num_steps)</p></td>
<td><p>Reshapes provided data from (pos, step * bin) to (pos * step, bin).</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Classes</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycroscopy.analysis.be_sho_fitter.BESHOfitter" title="pycroscopy.analysis.be_sho_fitter.BESHOfitter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BESHOfitter</span></code></a>(h5_main[, variables])</p></td>
<td><p>A class that handles the functional fitting of spectra obtained from Band Excitation Scanning Probe Microscopy to a Simple Harmonic Oscillator model</p></td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="pycroscopy.analysis.be_sho_fitter.BESHOfitter">
<em class="property">class </em><code class="sig-name descname">BESHOfitter</code><span class="sig-paren">(</span><em class="sig-param">h5_main</em>, <em class="sig-param">variables=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pycroscopy/analysis/be_sho_fitter.html#BESHOfitter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycroscopy.analysis.be_sho_fitter.BESHOfitter" title="Permalink to this definition">¶</a></dt>
<dd><p>A class that handles the functional fitting of spectra obtained from Band Excitation Scanning Probe
Microscopy to a Simple Harmonic Oscillator model</p>
<p>Analysis of Band excitation spectra with harmonic oscillator responses.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>h5_main</strong> (<em>h5py.Dataset instance</em>) – The dataset over which the analysis will be performed. This dataset should be linked to the spectroscopic
indices and values, and position indices and values datasets.</p></li>
<li><p><strong>variables</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>(</em><em>string</em><em>)</em><em>, </em><em>Default</em><em> [</em><em>'Frequency'</em><em>]</em>) – Lists of attributes that h5_main should possess so that it may be analyzed by Model.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="pycroscopy.analysis.be_sho_fitter.BESHOfitter.do_fit">
<code class="sig-name descname">do_fit</code><span class="sig-paren">(</span><em class="sig-param">max_mem=None</em>, <em class="sig-param">processors=None</em>, <em class="sig-param">solver_type='least_squares'</em>, <em class="sig-param">solver_options={'jac': 'cs'}</em>, <em class="sig-param">obj_func={'class': 'Fit_Methods'</em>, <em class="sig-param">'obj_func': 'SHO'</em>, <em class="sig-param">'xvals': array([]</em>, <em class="sig-param">dtype=float64)}</em>, <em class="sig-param">h5_partial_fit=None</em>, <em class="sig-param">h5_guess=None</em>, <em class="sig-param">override=False</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pycroscopy/analysis/be_sho_fitter.html#BESHOfitter.do_fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycroscopy.analysis.be_sho_fitter.BESHOfitter.do_fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fits the dataset to the SHO function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>max_mem</strong> (<em>uint</em><em>, </em><em>optional</em>) – Memory in MB to use for computation
Default None, available memory from psutil.virtual_memory is used</p></li>
<li><p><strong>processors</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Number of processors the user requests.  The minimum of this and self._maxCpus is used.
Default None</p></li>
<li><p><strong>solver_type</strong> (<em>string</em>) – Default is ‘Wavelet_Peaks’.
Can be one of [‘wavelet_peaks’, ‘relative_maximum’, ‘gaussian_processes’].
For updated list, run GuessMethods.methods</p></li>
<li><p><strong>solver_options</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – Dictionary of options passed to strategy. For more info see GuessMethods documentation.
Default {“peaks_widths”: np.array([10,200])}}.</p></li>
<li><p><strong>obj_func</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – Dictionary defining the class and method containing the function to be fit as well as any
additional function parameters.</p></li>
<li><p><strong>h5_partial_fit</strong> (<em>h5py.group. optional</em><em>, </em><em>default = None</em>) – Datagroup containing (partially computed) fit results. do_fit will resume computation if provided.</p></li>
<li><p><strong>h5_guess</strong> (<em>h5py.group. optional</em><em>, </em><em>default = None</em>) – Datagroup containing guess results. do_fit will use this if provided.</p></li>
<li><p><strong>override</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a><em>, </em><em>optional. default = False</em>) – By default, will simply return duplicate results to avoid recomputing or resume computation on a
group with partial results. Set to True to force fresh computation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>h5_results</strong> – Dataset with the fit parameters</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>h5py.Dataset object</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pycroscopy.analysis.be_sho_fitter.BESHOfitter.do_guess">
<code class="sig-name descname">do_guess</code><span class="sig-paren">(</span><em class="sig-param">max_mem=None</em>, <em class="sig-param">processors=None</em>, <em class="sig-param">strategy='complex_gaussian'</em>, <em class="sig-param">options={'peak_step': 20</em>, <em class="sig-param">'peak_widths': array([ 10</em>, <em class="sig-param">200])}</em>, <em class="sig-param">h5_partial_guess=None</em>, <em class="sig-param">override=False</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pycroscopy/analysis/be_sho_fitter.html#BESHOfitter.do_guess"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycroscopy.analysis.be_sho_fitter.BESHOfitter.do_guess" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>max_mem</strong> (<em>uint</em><em>, </em><em>optional</em>) – Memory in MB to use for computation
Default None, available memory from psutil.virtual_memory is used</p></li>
<li><p><strong>processors</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Number of processors to use during parallel guess
Default None, output of psutil.cpu_count - 2 is used</p></li>
<li><p><strong>strategy</strong> (<em>string</em>) – Default is ‘Wavelet_Peaks’.
Can be one of [‘wavelet_peaks’, ‘relative_maximum’, ‘gaussian_processes’]. For updated list, run
GuessMethods.methods</p></li>
<li><p><strong>options</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – Default Options for wavelet_peaks{“peaks_widths”: np.array([10,200]), “peak_step”:20}.
Dictionary of options passed to strategy. For more info see GuessMethods documentation.</p></li>
<li><p><strong>h5_partial_guess</strong> (<em>h5py.group. optional</em><em>, </em><em>default = None</em>) – Datagroup containing (partially computed) guess results. do_guess will resume computation if provided.</p></li>
<li><p><strong>override</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a><em>, </em><em>optional. default = False</em>) – By default, will simply return duplicate results to avoid recomputing or resume computation on a
group with partial results. Set to True to force fresh computation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>results</strong> – Dataset with the SHO guess parameters</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>h5py.Dataset object</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="pycroscopy.analysis.be_sho_fitter.is_reshapable">
<code class="sig-name descname">is_reshapable</code><span class="sig-paren">(</span><em class="sig-param">h5_main</em>, <em class="sig-param">step_start_inds=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pycroscopy/analysis/be_sho_fitter.html#is_reshapable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycroscopy.analysis.be_sho_fitter.is_reshapable" title="Permalink to this definition">¶</a></dt>
<dd><p>A BE dataset is said to be reshape-able if the number of bins per steps is constant. Even if the dataset contains
multiple excitation waveforms (harmonics), We know that the measurement is always at the resonance peak, so the
frequency vector should not change.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>h5_main</strong> (<em>h5py.Dataset object</em>) – Reference to the main dataset</p></li>
<li><p><strong>step_start_inds</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em> or </em><em>1D array</em>) – Indices that correspond to the start of each BE pulse / UDVS step</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>reshapable</strong> – Whether or not the number of bins per step are constant in this dataset</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Boolean</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pycroscopy.analysis.be_sho_fitter.reshape_to_n_steps">
<code class="sig-name descname">reshape_to_n_steps</code><span class="sig-paren">(</span><em class="sig-param">raw_mat</em>, <em class="sig-param">num_steps</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pycroscopy/analysis/be_sho_fitter.html#reshape_to_n_steps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycroscopy.analysis.be_sho_fitter.reshape_to_n_steps" title="Permalink to this definition">¶</a></dt>
<dd><p>Reshapes provided data from (positions * step, bin) to (positions, step * bin).
Use this to restructure data back to its original form after parallel computing</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>raw_mat</strong> (<em>2D numpy array</em>) – Data organized as (positions * step, bin)</p></li>
<li><p><strong>num_steps</strong> (<em>unsigned int</em>) – Number of spectroscopic steps per pixel (eg - UDVS steps)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>two_d</strong> – Data rearranged as (positions, step * bin)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>2D numpy array</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pycroscopy.analysis.be_sho_fitter.reshape_to_one_step">
<code class="sig-name descname">reshape_to_one_step</code><span class="sig-paren">(</span><em class="sig-param">raw_mat</em>, <em class="sig-param">num_steps</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pycroscopy/analysis/be_sho_fitter.html#reshape_to_one_step"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycroscopy.analysis.be_sho_fitter.reshape_to_one_step" title="Permalink to this definition">¶</a></dt>
<dd><p>Reshapes provided data from (pos, step * bin) to (pos * step, bin).
This is useful when unraveling data for parallel processing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>raw_mat</strong> (<em>2D numpy array</em>) – Data organized as (positions, step * bins)</p></li>
<li><p><strong>num_steps</strong> (<em>unsigned int</em>) – Number of spectroscopic steps per pixel (eg - UDVS steps)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>two_d</strong> – Data rearranged as (positions * step, bin)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>2D numpy array</p>
</dd>
</dl>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pycroscopy.analysis.fit_methods.html" class="btn btn-neutral float-right" title="pycroscopy.analysis.fit_methods" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="pycroscopy.analysis.be_loop_fitter.html" class="btn btn-neutral float-left" title="pycroscopy.analysis.be_loop_fitter" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Suhas Somnath, Chris Smith, Stephen Jesse, Numan Laanait

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>